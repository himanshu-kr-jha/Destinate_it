<style>
    /* Place the map button at the bottom left of the page */
    .dropdown-menu {
    background-color: #fff; /* White background for better visibility */
    border: 1px solid #ddd; /* Light border for separation */
    border-radius: 8px; /* Rounded corners */
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    padding: 10px 0; /* Padding for better spacing */
    min-width: 200px; /* Ensures dropdown is wide enough */
}

.dropdown-menu .dropdown-item {
    padding: 10px 15px; /* Larger padding for clickable area */
    color: #333; /* Dark text for readability */
    font-size: 0.95rem; /* Adjust text size */
    margin-right: 100px;
    transition: background-color 0.3s ease, color 0.3s ease; /* Smooth hover effect */
}

.dropdown-menu .dropdown-item:hover {
    background-color: #fe424d; /* Highlight background */
    color: white; /* White text on hover */
    border-radius: 6px; /* Rounded hover effect */
}

.dropdown-divider {
    margin: 5px 0; /* Reduced margin for compact design */
    border-color: #ddd; /* Light divider color */
}

.map-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background-color: #fe424d;
    color: white;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000; /* Ensures it's always on top */
}

.map-btn i {
    font-size: 1.5rem;
    color: white;
}

    .navbar .navbar-nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex: 1;
    }

    .navbar-nav .name {
        font-size: 1rem;
    }

    .navbar-expand .navbar-nav {
        flex-direction: row;
    }

    .navbar-nav .nav-item {
        flex: 1;
        text-align: center;
    }

    .form-inline {
        flex: 1;
        display: flex;
        justify-content: center;
    }


    .hide{
        opacity: 0;
    }
    /* Media query for smaller screens (less than 760px) */
    @media (max-width: 760px) {
        .infoText {
            display: none;
            width: 0;
            opacity: 0;
        }

        .navbar-nav {
            flex-direction: row;
            text-align: center;
            width: 100%;
        }

        .hide {
            /* display: none; */
            opacity: 0;

        }

        .navbar-nav .nav-link,
        .form-inline {
            width: auto;
            margin-bottom: 0.9rem;
        }

        .form-inline {
            margin-top: 10px;
        }

        .navbar-nav .name,
        .navbar-nav .search-btn {
            width: auto;
        }

        .navbar-nav {
            flex-direction: row;
            text-align: center;
            width: 100%;
        }

        .navbar-nav .search-btn,
        .navbar-nav .name,
        .navbar-nav .nav-link {
            display: inline-flex;
            align-items: center;
            margin: 0.5rem;
        }

        /* Hide the navbar-toggler (hamburger icon) */
        .navbagir-toggler {
            display: none;
        }
    }

    @media (min-width: 760px) {
        .search-inp {
            width: 15rem;
            /* Adjust width as desired for larger screens */
        }
    }

    @media(max-width:378px) {
        .logo-text {
            opacity: 0;
            display: none;
        }
    }

    .icon-text {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .icon-text i {
        font-size: 1.3rem;
        /* Adjust the icon size as needed */
    }

    .icon-text .infoText {
        font-size: 0.85rem;
        /* Adjust the text size as needed */
        margin-top: 0.25rem;
        /* Adjust the space between the icon and text */
    }

    /* Search button styling */
    .search-btn {
        background-color: #fe424d;
        color: white;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        /* Ensures it's always on top */
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .search-btn i {
        font-size: 1.5rem;
    }

    /* Modal background */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        /* Hidden by default */
        z-index: 2000;
    }

    .modal-overlay.show {
        display: block;
    }

    /* Modal styling */
    .search-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 90%;
        max-width: 400px;
        z-index: 2100;
        display: none;
    }

    .search-modal.show {
        display: block;
    }

    .search-modal input[type="search"] {
        width: 100%;
        padding: 10px;
        border-radius: 25px;
        border: 1px solid #ddd;
        font-size: 1rem;
        outline: none;
    }

    /* Close button inside the modal */
    .search-modal .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #fe424d;
    }

    /* Media query for smaller screens */
    @media (max-width: 760px) {
        .search-modal {
            width: 95%;
        }
    }
    
</style>

<body>
    <!-- Navbar (for context) -->
    <div class="map-btn">
        <a href="/map"><i class="fa-solid fa-map"></i>
        </a>
    </div>
    <nav class="navbar navbar-expand-md navbar-light bg-light border-bottom sticky-top">
        <a class="navbar-brand" href="/listing"><i class="fa-solid fa-tents"> <span class="logo-text"
                    style="font-size: 1.4rem;">Destinate !t</span></i></a>
        <div class="navbar-nav">
        
            <div class="navbar-nav">
                <!-- Search button and input form -->
                <form class="form-inline search-form hide" action="/search" method="GET">
                    <input class="form-control search-inp" type="search" name="q" placeholder="Search destinations"
                        aria-label="Search" />
                    <!-- Search button -->
                </form>

                <button class="btn search-btn hide" type="button">
                    <i class="fa fa-magnifying-glass"></i>
                </button>
                <!-- "Destinate It" link -->
                <a class="nav-link name" href="/listing/new">
                    <div class="icon-text">
                        <i class="fa-solid fa-location-dot" style="color: #fe424d;"></i>
                        <span class="infoText">Destinate It</span>
                    </div>
                </a>

                <!-- User login/logout links -->
                <% if (!currUser) { %>
                    <a class="nav-link" href="/user/signup">
                        <div class="icon-text">
                            <i class="fa-solid fa-user-plus" style="color: #fe424d;"></i>
                            <span class="infoText">SignUp</span>
                        </div>
                    </a>
                    <a class="nav-link" href="/user/login">
                        <div class="icon-text">
                            <i class="fa-solid fa-right-to-bracket" style="color: #fe424d;"></i>
                            <span class="infoText">LogIn</span>
                        </div>
                    </a>
                    <% } %>

                        <% if (currUser) { %>
                            <a class="nav-link" href="/user/profile/<%=currUser.id%>">
                                <div class="icon-text">
                                    <i class="fa-solid fa-user" style="color: #fe424d;"></i>
                                    <span class="infoText">Profile</span>
                                </div>
                            </a>

                            <a class="nav-link" href="/user/logout">
                                <div class="icon-text">
                                    <i class="fa-solid fa-arrow-right-from-bracket" style="color: #fe424d;"></i>
                                    <span class="infoText">LogOut</span>
                                </div>
                            </a>    
                            
                            <% } %>
            </div>
        </div>
    </nav>

    <!-- Search input form (hidden by default) -->
    <!-- Search button fixed at the bottom right -->
    <button class="btn search-btn" type="button">
        <i class="fa fa-magnifying-glass"></i>
    </button>

    <!-- Modal overlay -->
    <div class="modal-overlay"></div>

    <!-- Modal for search input -->
    <div class="search-modal">
        <button class="close-btn">&times;</button>
        <form action="/search" method="GET">
            <input type="search" name="q" placeholder="Search destinations" aria-label="Search" />
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchBtn = document.querySelector('.search-btn');
            const modalOverlay = document.querySelector('.modal-overlay');
            const searchModal = document.querySelector('.search-modal');
            const closeBtn = document.querySelector('.close-btn');

            // Open modal when search button is clicked
            searchBtn.addEventListener('click', function () {
                modalOverlay.classList.add('show');
                searchModal.classList.add('show');
            });

            // Close modal when clicking the close button or overlay
            closeBtn.addEventListener('click', function () {
                modalOverlay.classList.remove('show');
                searchModal.classList.remove('show');
            });

            modalOverlay.addEventListener('click', function () {
                modalOverlay.classList.remove('show');
                searchModal.classList.remove('show');
            });
        });
    </script>
</body>